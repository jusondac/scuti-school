<% if user_signed_in? %>
  <!-- Sidebar -->
  <aside id="sidebar" class="fixed left-0 top-16 w-64 h-[calc(100vh-64px)] bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 z-30">
    <div class="p-4">
      <!-- User Info -->
      <div class="mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-indigo-600 dark:bg-indigo-500 rounded-full flex items-center justify-center">
            <span class="text-white font-semibold text-sm"><%= current_user.email.first.upcase %></span>
          </div>
          <div>
            <p class="font-medium text-gray-900 dark:text-white text-sm"><%= current_user.email.split('@').first.capitalize %></p>
            <p class="text-xs text-gray-500 dark:text-gray-400 capitalize"><%= current_user.role %></p>
          </div>
        </div>
      </div>

      <!-- Navigation Menu based on role -->
      <nav class="space-y-2">
        <% if current_user.student? %>
          <%= render 'shared/sidebar/student' %>
        <% elsif current_user.teacher? %>
          <%= render 'shared/sidebar/teacher' %>
        <% elsif current_user.admin? %>
          <%= render 'shared/sidebar/admin' %>
        <% end %>
      </nav>
    </div>
  </aside>

  <!-- Sidebar overlay for mobile -->
  <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden lg:hidden"></div>
<% end %>
